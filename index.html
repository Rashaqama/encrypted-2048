<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Encrypted 2048</title>

    <!-- Load CoFHE from CDN (browser entry). Block app start until this finishes. -->
    <script type="module">
      try {
        const mod = await import("https://esm.sh/cofhejs@0.3.1/web?bundle");

        // Different builds may expose different export names.
        const cofhe =
          mod.CoFHE ??
          mod.cofhejs ??
          mod.default?.CoFHE ??
          mod.default?.cofhejs ??
          null;

        window.CoFHE = cofhe;
        window.cofhejs = cofhe;
        window.Encryptable = mod.Encryptable ?? mod.default?.Encryptable ?? null;

        window.__COFHE_STATUS__ = cofhe ? "loaded" : "missing-export";
        console.log("✅ CoFHE loaded from CDN", window.__COFHE_STATUS__, {
          hasEncryptable: !!window.Encryptable,
        });
      } catch (e) {
        console.error("❌ Failed to load CoFHE from CDN", e);
        window.CoFHE = null;
        window.cofhejs = null;
        window.Encryptable = null;
        window.__COFHE_STATUS__ = "failed";
      }
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
